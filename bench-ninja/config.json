{
    "vars": {
	"checkpoint-sim": "base",
	"valgrind": "../valgrind/install/bin/valgrind",
	"interval": 10000000,
	"simpoint": "../simpoint/bin/simpoint",
	"num_simpoints": 10,
	"memsize": "8GB",
	"warmup": 50000000
    },
    
    "sw": {
	"_default": {
	    "spec2017": "../cpu2017",
	    "test-suite": "../test-suite",
	    "llvm": "../llvm",
	    "cc": "../llvm/build/bin/clang",
	    "cxx": "../llvm/build/bin/clang++",
	    "cmake_build_type": "Release",
	    "test_suite_run_type": "ref",
	    "cflags": ["-fcf-protection=none", "-mno-avx"],
	    "ldflags": ["-static", "-fuse-ld=lld", "-Wl,--allow-multiple-definition"],
	    "deps": []
	},
	"_lto": {
	    "inherit": "_default",
	    "+cflags": ["-flto"],
	    "+ldflags": ["-flto"],
	    "+deps": ["../llvm/build/bin/ld.lld"]
	},

	"base": {
	    "inherit": "_default"
	},
	"base-lto": {
	    "inherit": "_lto"
	},

	"_llsct": {
	    "inherit": "_default",
	    "+cflags": [
		"-fpass-plugin=/home/nmosier/llsct2/passes/build/libDeclassifyPass.so",
		"-mllvm", "-llsct",
		"-mllvm", "-llsct-declassify",
		"-mllvm", "-llsct-cfi"
	    ],
	    "+deps": ["../passes/build/libDeclassifyPass.so"]
	},
	"llsct": {
	    "inherit": "_default",
	    "cflags": ["-DontUseThisSwMode"]
	},
	"llsct-lto": {
	    "inherit": "_lto",
	    "+ldflags": [
		"-Wl,--load-pass-plugin=/home/nmosier/llsct2/passes/build/libDeclassifyPass.so",
		"-Wl,-mllvm,-llsct,-mllvm,-llsct-declassify,-mllvm,-llsct-cfi"
	    ],
	    "+deps": ["../passes/build/libDeclassifyPass.so"]
	},
	"llsct-lto-debug": {
	    "inherit": "llsct-lto",
	    "+ldflags": ["-Wl,--load-pass-plugin=/home/nmosier/llsct2/passes/build/libDebugIR.so"],
	    "+deps": ["../passes/build/libDebugIR.so"]
	},
	"llsct-ct": {
	    "inherit": "_llsct",
	    "+cflags": ["-mllvm", "-tpe-privacy-policy=ct"]
	},
	"llsct-ctd": {
	    "inherit": "_llsct",
	    "+cflags": ["-mllvm", "-tpe-privacy-policy=ctdecl"]
	},
	"llsct-sbox": {
	    "inherit": "_llsct",
	    "+cflags": ["-mllvm", "-tpe-privacy-policy=sandbox"]
	}
    },

    "sim": {
	"_default": {
	    "target": "build/X86/gem5.opt",
	    "script": "configs/deprecated/example/se.py",
	    "sconsopts": ["--ignore-style", "-j25"]
	},
	
	"base": {
	    "inherit": "_default",
	    "src": "../gem5-spec2017"
	},
	"llsct": {
	    "inherit": "_default",
	    "src": "../gem5"
	},
	"spt": {
	    "inherit": "_default",
	    "src": "../spt"
	},
	"stt": {
	    "inherit": "_default",
	    "src": "../stt"
	}
    },

    "hwmode": {
	"_default": {
	    "gem5_opts": [],
	    "script_opts": []
	},

	"base": {
	    "inherit": "_default"
	},
	"llsct-declassify-shadow": {
	    "inherit": "_default",
	    "+script_opts": [
		"--llsct-declassify=1",
		"--llsct-declassify-entries=-1",
		"--llsct-declassify-impl=shadow"
	    ]
	},
	"llsct-declassify-cache": {
	    "inherit": "_default",
	    "+script_opts": [
		"--llsct-declassify=1",
		"--llsct-declassify-impl=cache",
		"--llsct-declassify-lines=1024"
	    ]
	},
	"llsct": {
	    "inherit": "llsct-declassify-cache",
	    "+script_opts": ["--llsct-cfi=1"]
	},
	"llsct-pipeview": {
	    "inherit": "llsct",
	    "+gem5_opts": ["--debug-flags=O3PipeView,O3PipeViewLLSCT,LLSCT", "--debug-file=dbgout.gz"]
	},
	"spt": {
	    "inherit": "_default",
	    "+script_opts": ["--enableSPT=1", "--moreTransmitInsts=2"]
	},
	"stt": {
	    "inherit": "_default",
	    "+script_opts": ["--STT=1"]
	},
	"llsct-arch": {
	    "inherit": "llsct",
	    "+script_opts": ["--llsct-threat-model=arch"]
	},
	"llsct-spectre": {
	    "inherit": "llsct",
	    "+script_opts": ["--llsct-speculation-model=spectre"]
	},
	"stt-spectre": {
	    "inherit": "stt",
	    "+script_opts": ["--speculation-model=spectre"]
	},
	"spt-spectre": {
	    "inherit": "spt",
	    "+script_opts": ["--speculation-model=spectre"]
	}
    },

    "exp": {
	"unsafe-baseline": {"sw": "llsct", "sim": "base", "hwmode": "base"},
	"unsafe-baseline-lto": {"sw": "llsct-lto", "sim": "base", "hwmode": "base"},
	"llsct": {"sw": "llsct", "sim": "llsct", "hwmode": "llsct-declassify-shadow"},
	"llsct-lto": {"inherit": "llsct", "sw": "llsct-lto"},
	"llsct-lto-unsafe": {"inherit": "llsct-lto", "hwmode": "base"},
	"llsct-cache": {"sw": "llsct", "sim": "llsct", "hwmode": "llsct-declassify-cache"},
	"llsct-lto-cache": {"sw": "llsct-lto", "sim": "llsct", "hwmode": "llsct-declassify-cache"},
	"llsct-lto-debug": {"sw": "llsct-lto-debug", "sim": "llsct", "hwmode": "llsct-declassify-shadow"},
	"llsct-cfi": {"sw": "llsct", "sim": "llsct", "hwmode": "llsct"},
	"llsct-pipeview": {"sw": "llsct", "sim": "llsct", "hwmode": "llsct-pipeview"},
	"llsct-arch": {"sw": "llsct", "sim": "llsct", "hwmode": "llsct-arch"},
	"llsct-spectre": {"sw": "llsct", "sim": "llsct", "hwmode": "llsct-spectre"},

	"unsafe-ct":  {"sw": "llsct-ct",   "sim": "base",  "hwmode": "base"},
	"unsafe-sbox":{"sw": "llsct-sbox", "sim": "base",  "hwmode": "base"},

	"llsct-ct-futuristic":   {"sw": "llsct-ct",   "sim": "llsct", "hwmode": "llsct"},
	"llsct-sbox-futuristic": {"sw": "llsct-sbox", "sim": "llsct", "hwmode": "llsct"},
	"llsct-ct-spectre":   {"sw": "llsct-ct",   "sim": "llsct", "hwmode": "llsct-spectre"},
	"llsct-sbox-spectre": {"sw": "llsct-sbox", "sim": "llsct", "hwmode": "llsct-spectre"},

	"spt-ct-futuristic": {"sw": "llsct-ct", "sim": "spt", "hwmode": "spt"},
	"spt-ct-spectre": {"sw": "llsct-ct", "sim": "spt", "hwmode": "spt-spectre"},

	"stt-sbox-futuristic": {"sw": "llsct-sbox", "sim": "stt", "hwmode": "stt"},
	"stt-sbox-spectre": {"sw": "llsct-sbox", "sim": "stt", "hwmode": "stt-spectre"}
    }
}
