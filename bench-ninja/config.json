{
    "vars": {
        "checkpoint-sim": "pincpu",
	    "pin": "../pin/pin",
	    "pinpoints": "../tools/build/libbbtrace.so",
        "functoinst" : "../tools/build/libfunctoinst.so",
        "pin_tool": "../gem5/pincpu/pintool/build/libclient.so",
        "pin_kernel": "../gem5/pincpu/pintool/build/kernel",
	    "interval": 50000000,
	    "simpoint": "../simpoint/bin/simpoint",
	    "num_simpoints": 10,
	    "memsize": "8GB",
	    "ss": "8MB",
	    "warmup": 10000000,
	    "bbv-impl": "pin"
    },
    
    "sw": {
	    "_default": {
	        "spec2017": "../cpu2017",
	        "test-suite": "../test-suite",
	        "cmake_build_type": "Release",
	        "cflags": ["-O3", "-mno-avx", "-mllvm", "-global-isel", "-mllvm", "-global-isel-abort=0"],
	        "fflags": ["-O3", "-mno-avx", "-mllvm", "-global-isel", "-mllvm", "-global-isel-abort=0"],
	        "ldflags": ["-static", "-fuse-ld=lld", "-Wl,--allow-multiple-definition", "-lm"],
	        "libc_cflags": ["-mllvm", "-global-isel=0"],
	        "libcxx_cflags": ["-mllvm", "-global-isel=0"],
	        "deps": []
	    },

	    "base": {
	        "inherit": "_default",
            "llvm": "../llvm/base",
            "cc": "../llvm/base/build/bin/clang",
            "cxx": "../llvm/base/build/bin/clang++",
            "fc": "../llvm/base/build/bin/flang-new",
            "+ldflags": ["-L/home/nmosier/llsct2/llvm/base/build/lib"]
	    },

        "ptex-all": {
            "inherit": "_default",
            "parent": "base",
            "llvm": "../llvm/ptex-all",
            "cc": "../llvm/ptex-all/build/bin/clang",
            "cxx": "../llvm/ptex-all/build/bin/clang",
            "fc": "../llvm/ptex-all/build/bin/flang-new",
            "+ldflags": ["-L/home/nmosier/llsct2/llvm/ptex-all/build/lib"]
        },

        "ptex-cts": {
            "inherit": "ptex-all",
            "+cflags": ["-mllvm", "-x86-ptex", "-mllvm", "-x86-ptex-type=cts"],
            "+fflags": ["-mllvm", "-x86-ptex", "-mllvm", "-x86-ptex-type=cts"]
        },

        "ptex-ct": {
            "inherit": "ptex-all",
            "+cflags": ["-mllvm", "-x86-ptex", "-mllvm", "-x86-ptex-type=ct"],
            "+fflags": ["-mllvm", "-x86-ptex", "-mllvm", "-x86-ptex-type=ct"]
        },

        "ptex-ctd": {
            "inherit": "ptex-all",
            "+cflags": ["-mllvm", "-x86-ptex", "-mllvm", "-x86-ptex-type=ctdecl"],
            "+fflags": ["-mllvm", "-x86-ptex", "-mllvm", "-x86-ptex-type=ctdecl"]
        },        

        "annotate-bound-to-leak": {
            "inherit": "ptex-all",
            "+cflags": ["-mllvm", "-x86-annotate-public=bound-to-leak"],
            "+fflags": ["-mllvm", "-x86-annotate-public=bound-to-leak"]
        },

	    "annotate-pointer-loads": {
	        "inherit": "ptex-all",
	        "+cflags": ["-mllvm", "-x86-annotate-public=pointers"],
	        "+fflags": ["-mllvm", "-x86-annotate-public=pointers"]
	    }
    },

    "sim": {
	    "_default": {
	        "target": "build/X86_MESI_Three_Level/gem5.opt",
	        "script_kvm": "configs/se-kvm-cpt.py",
	        "script_o3": "configs/AlderLake/se.py",
	        "sconsopts": ["--ignore-style", "-j25", "--linker=lld"]
	    },
	    "base": {
	        "inherit": "_default",
	        "src": "../gem5/base"
	    },
        "pincpu": {
            "inherit": "_default",
            "src": "../gem5/pincpu",
            "script_bbv": "configs/pin-bbv.py",
            "script_f2i": "configs/pin-f2i.py"
        },
        "ptex": {
            "inherit": "_default",
            "src": "../gem5/ptex"
        },
	    "tpe": {
	        "inherit": "_default",
	        "src": "../gem5/tpe"
	    },
	    "spt": {
	        "inherit": "_default",
	        "src": "../gem5/spt"
	    },
        "stt": {
            "inherit": "_default",
            "src": "../gem5/stt"
        },
        "tpt": {
            "inherit": "_default",
            "src": "../gem5/tpt"
        },
        "recon": {
            "inherit": "_default",
            "src": "../gem5/recon"
        }
    },

    "hwmode": {
	    "_default": {
            "gem5_opts": ["--debug-file=dbgout.txt.gz"],
	        "script_opts": ["--ruby", "--enable-prefetch"]
	    },

	    "base": {"inherit": "_default"},

        "ptex": {"inherit": "_default"},

	    "tpe": {
	        "inherit": "_default",
	        "+script_opts": ["--tpe-reg", "--tpe-mem", "--tpe-xmit"],
	        "+gem5_opts": []
	    },

	    "spt": {
	        "inherit": "_default",
	        "+script_opts": ["--spt", "--fwdUntaint=1", "--bwdUntaint=1", "--enableShadowL1=1"]
	    },

	    "stt": {
	        "inherit": "_default",
            "+script_opts": ["--stt", "--implicit-channel"]
	    },

        "recon": {
            "inherit": "_default",
            "+script_opts": ["--stt", "--recon", "--recon-bugfix-taint"]
        },

        "recon-stt": {
            "inherit": "_default",
            "+script_opts": ["--stt", "--recon-bugfix-taint"]
        },

        "tpt": {
            "inherit": "_default",
            "+gem5_opts": ["--debug-flag=TPT"],
            "+script_opts": ["--tpt", "--implicit-channel=Eager", "--tpt-reg", "--tpt-mem", "--tpt-xmit"]
        },

        "stt-ctrl": {"inherit": "stt", "+script_opts": ["--speculation-model=Ctrl"]},
        "stt-atret": {"inherit": "stt", "+script_opts": ["--speculation-model=AtRet"]},
        "recon-ctrl": {"inherit": "recon", "+script_opts": ["--speculation-model=Ctrl"]},
        "tpt-atret": {"inherit": "tpt", "+script_opts": ["--speculation-model=AtRet", "--tpt-mode=YRoT"]},
        "tpt-ctrl": {"inherit": "tpt", "+script_opts": ["--speculation-model=Ctrl", "--tpt-mode=YRoT"]},
        "spt-ctrl": {"inherit": "spt", "+script_opts": ["--speculation-model=Ctrl"]},
        "spt-atret": {"inherit": "spt", "+script_opts": ["--speculation-model=AtRet"]},
        "recon-atret": {"inherit": "recon", "+script_opts": ["--speculation-model=AtRet"]},
        "tpe-ctrl": {"inherit": "tpe", "+script_opts": ["--speculation-model=Ctrl"]},
        "tpe-atret": {"inherit": "tpe", "+script_opts": ["--speculation-model=AtRet"]},

        "tpt-tmp1-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowMem", "--speculation-model=AtRet"]
        },
        "tpt-tmp2-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowMem", "--speculation-model=AtRet", "--implicit-channel"]
        },
        "tpt-tmp3-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowL1", "--speculation-model=AtRet", "--implicit-channel"]
        },
        "tpt-tmp4-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowL1", "--speculation-model=AtRet", "--implicit-channel", "--tpt-mem"]
        },
        "tpt-tmp5-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowL1", "--speculation-model=AtRet", "--implicit-channel", "--tpt-mem", "--tpt-reg"]
        },
        "tpt-tmp6-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowL1", "--speculation-model=AtRet", "--implicit-channel", "--tpt-mem", "--tpt-reg", "--tpt-xmit"]
        },
        "tpt-tmp7-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowL1", "--speculation-model=AtRet", "--tpt-mem"]
        },
        "tpt-tmp8-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowL1", "--speculation-model=AtRet", "--implicit-channel=None", "--tpt-mem", "--tpt-reg", "--tpt-xmit"]
        },
        "tpt-tmp9-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowL1", "--speculation-model=AtRet", "--implicit-channel=Eager", "--tpt-mem", "--tpt-reg", "--tpt-xmit"]
        },
        "tpt-tmpA-atret": {
            "inherit": "_default",
            "+script_opts": ["--tpt", "--ptex-mem=ShadowL1", "--speculation-model=AtRet", "--implicit-channel=Lazy", "--tpt-mem", "--tpt-reg", "--tpt-xmit"]
        },

        "recon-tmp1-atret": {
            "inherit": "_default",
            "+script_opts": ["--speculation-model=AtRet"]
        },
        "recon-tmp2-atret": {
            "inherit": "recon-tmp1-atret",
            "+script_opts": ["--stt"]
        },
        "recon-tmp3-atret": {
            "inherit": "recon-tmp2-atret",
            "+script_opts": ["--recon-bugfix-taint"]
        },
        "recon-tmp4-atret": {
            "inherit": "recon-tmp3-atret",
            "+script_opts": ["--recon"]
        },
        "recon-tmp5-atret": {
            "inherit": "recon-tmp2-atret",
            "+script_opts": ["--recon"]
        },

        "recon-stt-atret": {
            "inherit": "recon-stt",
            "+script_opts": ["--speculation-model=AtRet"]
        }
    },

    "exp": {
        "unsafe-base": {"sw": "base", "sim": "base", "hwmode": "base"},
        "stt-base-ctrl": {"sw": "base", "sim": "stt", "hwmode": "stt-ctrl"},
        "stt-base-atret": {"sw": "base", "sim": "stt", "hwmode": "stt-atret"},
        "recon-base-ctrl": {"sw": "base", "sim": "recon", "hwmode": "recon-ctrl"},
        "recon-base-atret": {"sw": "base", "sim": "recon", "hwmode": "recon-atret"},
        "spt-base-ctrl": {"sw": "base", "sim": "spt", "hwmode": "spt-ctrl"},
        "spt-base-atret": {"sw": "base", "sim": "spt", "hwmode": "spt-atret"},
        "tpt-base-ctrl": {"sw": "base", "sim": "tpt", "hwmode": "tpt-ctrl"},
        "tpt-base-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-atret"},

        "tpt-cts-ctrl": {"sw": "ptex-cts", "sim": "tpt", "hwmode": "tpt-ctrl"},
        "tpt-cts-atret": {"sw": "ptex-cts", "sim": "tpt", "hwmode": "tpt-atret"},

        "tpt-ct-ctrl": {"sw": "ptex-ct", "sim": "tpt", "hwmode": "tpt-ctrl"},
        "tpt-ct-atret": {"sw": "ptex-ct", "sim": "tpt", "hwmode": "tpt-atret"},

        "tpt-ctd-ctrl": {"sw": "ptex-ctd", "sim": "tpt", "hwmode": "tpt-ctrl"},
        "tpt-ctd-atret": {"sw": "ptex-ctd", "sim": "tpt", "hwmode": "tpt-atret"},

        "spt-btl-ctrl": {"sw": "annotate-bound-to-leak", "sim": "spt", "hwmode": "spt-ctrl"},
        "spt-btl-atret": {"sw": "annotate-bound-to-leak", "sim": "spt", "hwmode": "spt-atret"},
        "spt-ptr-ctrl": {"sw": "annotate-pointer-loads", "sim": "spt", "hwmode": "spt-ctrl"},
        "spt-ptr-atret": {"sw": "annotate-pointer-loads", "sim": "spt", "hwmode": "spt-atret"},
        "recon-btl-ctrl": {"sw": "annotate-bound-to-leak", "sim": "recon", "hwmode": "recon-ctrl"},
        "recon-btl-atret": {"sw": "annotate-bound-to-leak", "sim": "recon", "hwmode": "recon-atret"},
        "recon-ptr-ctrl": {"sw": "annotate-pointer-loads", "sim": "recon", "hwmode": "recon-ctrl"},
        "recon-ptr-atret": {"sw": "annotate-pointer-loads", "sim": "recon", "hwmode": "recon-atret"},

        "tpe-ctd-atret": {"sw": "ptex-ctd", "sim": "tpe", "hwmode": "tpe-atret"},
        "tpt-base-tmp1-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp1-atret"},
        "tpt-base-tmp2-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp2-atret"},
        "tpt-base-tmp3-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp3-atret"},
        "tpt-base-tmp4-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp4-atret"},
        "tpt-base-tmp5-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp5-atret"},
        "tpt-base-tmp6-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp6-atret"},
        "tpt-base-tmp7-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp7-atret"},
        "tpt-base-tmp8-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp8-atret"},
        "tpt-base-tmp9-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmp9-atret"},
        "tpt-base-tmpA-atret": {"sw": "base", "sim": "tpt", "hwmode": "tpt-tmpA-atret"},
        
        "recon-stt-base-atret": {"sw": "base", "sim": "recon", "hwmode": "recon-stt-atret"},
        "recon-tmp1-atret": {"sw": "base", "sim": "recon", "hwmode": "recon-tmp1-atret"},
        "recon-tmp2-atret": {"sw": "base", "sim": "recon", "hwmode": "recon-tmp2-atret"},
        "recon-tmp3-atret": {"sw": "base", "sim": "recon", "hwmode": "recon-tmp3-atret"},
        "recon-tmp4-atret": {"sw": "base", "sim": "recon", "hwmode": "recon-tmp4-atret"},
        "recon-tmp5-atret": {"sw": "base", "sim": "recon", "hwmode": "recon-tmp5-atret"}
    }
}
